<!--<!DOCTYPE html>-->
<html lang="ja">
  
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>圧力の計算</title>
  <meta name="apple-mobile-web-app-capable" content="yes"> 
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=BIZ+UDGothic:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
  
<body>
  <header class="game-header">
    <div class="user-info">
      
      <button id="end-game-btn">やめる</button>
      <p><spen id="user-name-display">username</spen></p>
      <!--<button id="change-name-btn">名前を変更</button>
      
      <p></p>
      <p>解いた問題数: <spen id="solved-count">10</spen> 問</p>-->
     
    </div>
    
    <div class="header-title-center">
      <p>タイムアタック</p>
    </div>
    
    <div>
      <p class="progress">
      <spen class="now-questions">10</spen>
      <spen class="mini-text">/
        <spen class="all-questions">30</spen></spen>
    </p>
    </div>
    
    <!--<a href="#" class="achievements-link">実績一覧</a>-->
    
  </header>

  <main>
    
  </main>

  <div id="countdown-overlay">
    <div id="countdown-timer">3</div>
  </div>
  <div id="problem-area" class="hidden">
    <div class="fraction-container">
      <div class="input-container">
        <input type="text" id="n-input" class="input-box" inputmode="none" readonly>
        <span class="unit">N</span>
      </div>
      <div class="fraction-line"></div> <!-- 分数線 -->
      <div class="input-container">
        <input type="text" id="m2-input" class="input-box" inputmode="none" readonly>
        <span class="unit">m²</span>
      </div>
    </div>
    <span class="equals">=</span>
    <div class="input-container">
      <input type="text" id="pa-input" class="input-box" inputmode="none" readonly>
      <span class="unit">Pa</span>
    </div>
  </div>

  
  <script>
    const usernameDisplay = document.getElementById('user-name-display');

// ページの読み込み時に実行する関数
    function initializeUsername() {
  // ローカルストレージからユーザーネームを取得
      const savedName = localStorage.getItem('username');

  // 名前が保存されていない場合
      if (!savedName) {
        updateUsernameDisplay('username'); // 名前設定ダイアログを表示
      } else {
        updateUsernameDisplay(savedName); // ヘッダーに名前を表示
      }
    }
    
    // ユーザーネーム表示を更新する関数
    function updateUsernameDisplay(name) {
      usernameDisplay.textContent = name;
    }

    // イベントリスナーを設定
    // ページが完全に読み込まれた後に実行
    document.addEventListener('DOMContentLoaded', initializeUsername);

    document.getElementById('end-game-btn').addEventListener('click', () => {
    // 確認ダイアログを表示し、ユーザーの選択を `isConfirmed` に格納する
    const isConfirmed = window.confirm('今回の記録は保存されません。本当にやめますか？');

    // もしユーザーが「OK」をクリックしたら
    if (isConfirmed) {
        // ブラウザの履歴を1つ戻り、前のページに遷移する
        window.history.back();
    }
});

    document.addEventListener('DOMContentLoaded', () => {
  const countdownOverlay = document.getElementById('countdown-overlay');
  const countdownTimer = document.getElementById('countdown-timer');
  const problemArea = document.getElementById('problem-area');
  
  let count = 3;

  const countdownInterval = setInterval(() => {
    count--;
    countdownTimer.textContent = count;
    
    if (count === 0) {
      clearInterval(countdownInterval); // カウントダウンを停止
      countdownOverlay.style.display = 'none'; // オーバーレイを非表示
      problemArea.classList.remove('hidden'); // 問題文を表示
    }
  }, 1000); // 1秒ごとに実行
});
    
  </script>
  
</body>
</html>
